{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/error.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY = \"43158866-7219a8d3eb05541ec3ccbc26d\";\nconst URL = \"https://pixabay.com/api/\";\n\nexport async function searchPhoto(query, page, perPage) {\n    const response = await axios.get(`${URL}?key=${KEY}&q=${query}&page=${page}&per_page=${perPage}`);\n    return await response.data;\n}","export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from \"izitoast\";\nimport Error from \"../img/error.svg\";\n\nexport function showErrorMessage() {\n  iziToast.show({\n    message: \"Sorry, there are no images matching your search query. Please, try again!\",\n    maxWidth: \"340px\",\n    iconUrl: Error,\n    backgroundColor: \"#ef4040\",\n    theme: \"dark\",\n    color: \"#fafafb\",\n    timeout: 3000,\n    position: \"topRight\"\n  });\n}\n\n\n\nexport function showEndPictures() {\n  iziToast.show({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    maxWidth: \"340px\",\n    iconUrl: Error,\n    backgroundColor: \"#ef4040\",\n    theme: \"dark\",\n    color: \"#fafafb\",\n    timeout: 3000,\n    position: \"topRight\"\n  });\n}\n\n\nexport function showNoneText() {\n  iziToast.show({\n    message: \"Sorry, you have an empty string\",\n    maxWidth: \"340px\",\n    iconUrl: Error,\n    backgroundColor: \"#ef4040\",\n    theme: \"dark\",\n    color: \"#fafafb\",\n    timeout: 3000,\n    position: \"topRight\"\n  });\n}\n\n\nexport function renderImage(img, arrayImg) {\n  const markup = arrayImg.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `<li class=\"li-img\">\n      <a href=\"${largeImageURL}\">\n        <img class=\"img-descr\" src=\"${webformatURL}\" alt=\"${tags}\">\n      </a>\n      <ul class=\"info-photo\">\n        <li class=\"descr\">\n          <h2 class=\"descr-h2\">Likes</h2>\n          <p class=\"descr-p\">${likes}</p>\n        </li>\n        <li>\n          <h2 class=\"descr-h2\">Views</h2>\n          <p class=\"descr-p\">${views}</p>\n        </li>\n        <li>\n          <h2 class=\"descr-h2\">Comments</h2>\n          <p class=\"descr-p\">${comments}</p>\n        </li>\n        <li>\n          <h2 class=\"descr-h2\">Downloads</h2>\n          <p class=\"descr-p\">${downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n  }).join(\"\");\n\n  img.insertAdjacentHTML(\"beforeend\", markup);\n}","import { searchPhoto } from \"./js/pixabay-api.js\";\nimport { showErrorMessage, renderImage, showEndPictures, showNoneText } from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formEl = document.querySelector('form');\nconst images = document.querySelector('.list');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.loadBtn');\nconst value = document.querySelector(\"#value\");\n\nlet page;\n\nlet current_query;\n\nconst perPage = 15;\n\nconst simpleRefresh = new SimpleLightbox('.list li a', {\n    captionDelay: 300,\n    captions: true,\n    captionsData: \"alt\",\n    captionClass: \"color-style\",\n});\n\nfunction showLoad() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoad() {\n    loader.style.display = \"none\";\n}\n\n\nfunction scrollToPage() {\n    const cart = document.querySelector('.list li')\n\n    let cartSize = cart.getBoundingClientRect();\n    window.scrollBy({\n        top: 2.25 * cartSize.height,\n        behavior: \"smooth\",\n    });\n}\n\nfunction endPictures() {\n    showEndPictures();\n    loadMore.style.display = 'none';\n}\n\nfunction checkPages(totalHits) {\n    const totalPages = perPage * page;\n    if (totalPages >= totalHits) {\n        endPictures();\n    } else {\n        scrollToPage()\n    }\n}\n\nhideLoad();\n\nformEl.addEventListener('submit', function (event) {\n    event.preventDefault();\n    showLoad();\n\n    images.innerHTML = \"\";\n    loadMore.style.display = 'none';\n\n    const query = value.value.trim();\n\n    if (!query) {\n        showNoneText();\n        hideLoad();\n        return;\n    }\n\n    page = 1;\n\n    searchPhoto(query, page, perPage).then(arrayImg => {\n        if (arrayImg.hits.length === 0) {\n            throw new Error(\"No images found\");\n        } else {\n            renderImage(images, arrayImg.hits);\n            simpleRefresh.refresh();\n            if (arrayImg.totalHits > 15) {\n                loadMore.style.display = \"block\";\n            }\n        }\n    }).catch(() => {\n        showErrorMessage();\n    }).finally(() => {\n        hideLoad();\n    });\n\n    current_query = query;\n    formEl.reset();\n});\n\nloadMore.addEventListener('click', (event) => {\n    event.preventDefault();\n    showLoad();\n    page++;\n    console.log(current_query);\n    searchPhoto(current_query, page, perPage)\n        .then(arrayImg => {\n            renderImage(images, arrayImg.hits);\n            simpleRefresh.refresh();\n            const totalHits = arrayImg.totalHits;\n            checkPages(totalHits);\n        }).catch(() => {\n            showErrorMessage();\n        })\n        .finally(() => {\n            hideLoad();\n        })\n});\n"],"names":["KEY","URL","searchPhoto","query","page","perPage","axios","Error$1","showErrorMessage","iziToast","Error","showEndPictures","showNoneText","renderImage","img","arrayImg","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formEl","images","loader","loadMore","value","current_query","simpleRefresh","SimpleLightbox","showLoad","hideLoad","scrollToPage","cartSize","endPictures","checkPages","totalHits","event"],"mappings":"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"}